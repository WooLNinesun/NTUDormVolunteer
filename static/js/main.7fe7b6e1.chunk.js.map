{"version":3,"sources":["components/CardView.tsx","utilities/gsx.ts","DataViewTab.tsx","components/TabSidebar.tsx","components/Loading.tsx","GSXToWebApp.tsx","serviceWorker.ts","index.tsx"],"names":["CardView","props","isLoading","headerContent","rowDatas","react_default","a","createElement","className","Card","Group","centered","doubling","map","rowData","index","key","fluid","Content","Table","definition","Body","name","Row","Cell","width","defaultProps","getStringFromRawObject","title","$t","getRowDataFromWorksheetEntries","entries","entry","Object","keys","filter","indexOf","forEach","headerName","substring","content","DataView","worksheet","_React$useState","React","useState","_React$useState2","slicedToArray","setIsLoading","_React$useState3","_React$useState4","setRowDatas","useEffect","fetch","link","then","response","json","result","feed","error","Header","as","textAlign","dividing","src_components_CardView","TabSidebar","tabMenuItems","linkMenuItems","mobileSidebarVisible","setMobileSidebarVisible","ActiveIndex","setActiveIndex","handelMenuItemClick","event","data","menuItems","Fragment","Menu","Item","header","menuItem","active","onClick","icon","Icon","Divider","horizontal","href","target","tabPanel","Grid","Column","panel","columns","only","Sidebar","Pushable","vertical","animation","color","onHide","visible","Pusher","dimmed","borderless","compact","fixed","size","inverted","fitted","pointing","secondary","Loading","children","react_spinners","loading","sizeUnit","defaultSettings","links","defaultSettingData","attribute","linkRegexp","RegExp","GSXToWebApp","setTitle","_React$useState5","_React$useState6","settings","setSettings","_React$useState7","_React$useState8","worksheets","setWorksheets","getWorksheetDataFromEntries","sheetTitle","sheetLink","find","test","rel","concat","getWorksheetLink","push","rawSettings","rawSetting","assign","matches","match","objectSpread","sheetID","URLSearchParams","window","location","search","get","apiQuery","apiUrl","src_components_Loading","src_components_TabSidebar","src_DataViewTab","Boolean","hostname","ReactDOM","render","src_GSXToWebApp_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7fe7b6e1.chunk.js","sourcesContent":["import React from 'react';\n\nimport './CardView.scss';\n\nimport { Card, Table } from 'semantic-ui-react';\n\nimport { RowData } from '../interface/app';\n\ninterface CardViewProps {\n  isLoading: boolean,\n  headerContent: string[],\n  rowDatas: RowData[]\n};\n\nconst CardView: React.FunctionComponent<CardViewProps> = (props) => {\n  const { isLoading, headerContent, rowDatas } = props;\n  return (\n    <div className='card-view'>\n      <Card.Group centered doubling>\n        {isLoading ? '' : rowDatas.map((rowData, index) => {\n          return (\n            <Card key={index} fluid>\n              <Card.Content>\n                <Table definition>\n                  <Table.Body>\n                    {headerContent.map((name, index) => {\n                      return (\n                        <Table.Row key={index} >\n                          <Table.Cell width={4}>{name}</Table.Cell>\n                          <Table.Cell>{rowData[name]}</Table.Cell>\n                        </Table.Row>\n                      )\n                    })}\n                  </Table.Body>\n                </Table>\n              </Card.Content>\n            </Card>\n          )\n        })}\n      </Card.Group>\n    </div>\n  );\n}\n\nCardView.defaultProps = {\n  isLoading: false,\n  headerContent: [],\n  rowDatas: []\n}\n\nexport default CardView;\n","import { SheetRawObject, WorksheetCellEntry } from '../interface/gsx';\nimport { RowData } from '../interface/app';\n\nexport function getStringFromRawObject(title: SheetRawObject): string {\n  return (title && title.$t) ? title.$t : '';\n}\n\nexport function getRowDataFromWorksheetEntries(entries: WorksheetCellEntry[]): RowData[] {\n  return entries.map((entry: WorksheetCellEntry): RowData => {\n    let rowData: RowData = {};\n    Object.keys(entry)\n      .filter(key => (key.indexOf('gsx$') > -1))\n      .forEach((key: string): void => {\n        const headerName = key.substring(4);\n        const content = getStringFromRawObject(entry[key]);\n        rowData[headerName] = content;\n      });\n    return rowData;\n  });\n}\n","import React from 'react';\n\nimport { Header } from 'semantic-ui-react';\nimport CardView from './components/CardView';\n\nimport './DataViewTab.scss';\n\nimport { getRowDataFromWorksheetEntries } from './utilities/gsx';\n\nimport { RowData } from './interface/app';\n\ninterface DataViewProps {\n  worksheet: {\n    title: string,\n    link: string\n  }\n};\n\nconst DataView: React.FunctionComponent<DataViewProps> = (props) => {\n  const { worksheet } = props;\n\n  // const [isError, setIsError] = useState<boolean>(false);\n  const [isLoading, setIsLoading] = React.useState<boolean>(true);\n  const [rowDatas, setRowDatas] = React.useState<RowData[]>([]);\n\n  React.useEffect(() => {\n    fetch(worksheet.link)\n      .then(response => response.json())\n      .then((result) => {\n        setRowDatas(getRowDataFromWorksheetEntries(result.feed.entry));\n        setIsLoading(false);\n      }, (error) => {\n        // setIsError(true);\n      });\n  }, [worksheet]);\n\n  return (\n    <div className='data-view-tab'>\n      <Header as='h1' textAlign='center' dividing>{worksheet.title}</Header>\n      <CardView\n        isLoading={isLoading}\n        headerContent={Object.keys(rowDatas[0] || {})}\n        rowDatas={rowDatas}\n      />\n    </div>\n  );\n}\n\nexport default DataView;\n","import React from 'react';\n\nimport './TabSidebar.scss';\n\nimport { Sidebar, Grid, Menu, Icon, Divider, Header } from 'semantic-ui-react';\n\nimport { MenuItems } from '../interface/app';\n\ninterface TabSidebarProps {\n  title: string,\n  tabMenuItems: MenuItems[],\n  linkMenuItems: MenuItems[],\n};\n\nconst TabSidebar: React.FunctionComponent<TabSidebarProps> = (props) => {\n  const { title, tabMenuItems, linkMenuItems } = props;\n\n  const [mobileSidebarVisible, setMobileSidebarVisible] = React.useState<boolean>(false);\n\n  const [ActiveIndex, setActiveIndex] = React.useState<number>(0);\n  const handelMenuItemClick = (event: React.SyntheticEvent, data: any) => {\n    setActiveIndex(data['index']);\n    setMobileSidebarVisible(false);\n  }\n\n  const menuItems = (<React.Fragment>\n    <Menu.Item header>{title}</Menu.Item>\n    {tabMenuItems.map((menuItem, index) => (\n      <Menu.Item key={index}\n        index={index} active={ActiveIndex === index}\n        onClick={handelMenuItemClick} icon\n      ><Icon name='table'></Icon>\n        {menuItem.name}\n      </Menu.Item>\n    ))}\n    <Divider horizontal><Header as='h6'>Links</Header></Divider>\n    {linkMenuItems.map((menuItem, index) => (\n      <Menu.Item key={index} icon as='a' href={menuItem.href} target='__blank'>\n        <Icon name='external alternate'></Icon>\n        {menuItem.name}\n      </Menu.Item>\n    ))}\n  </React.Fragment>);\n\n  const tabPanel = (<Grid>\n    {tabMenuItems.map((menuItems, index) =>\n      <Grid.Column key={index} className={(ActiveIndex === index) ? '' : 'hidden'}>\n        {menuItems.panel}\n      </Grid.Column>\n    )}\n  </Grid>);\n\n  return (<Grid>\n    <Grid.Row columns={1} only='mobile tablet'>\n      <Sidebar.Pushable as={Grid.Column} className='mobile-sidebar-container'>\n        <Sidebar\n          as={Menu} vertical animation='overlay' color='blue'\n          onHide={() => setMobileSidebarVisible(false)} visible={mobileSidebarVisible}\n        >{menuItems}\n        </Sidebar>\n        <Sidebar.Pusher dimmed={mobileSidebarVisible}>\n          <Menu borderless compact fixed='left' size='small' inverted color='blue'>\n            <Menu.Item\n              className='mobile-sidebar-toggle'\n              onClick={() => setMobileSidebarVisible(true)}\n            ><Icon fitted name='sidebar'></Icon>\n            </Menu.Item>\n          </Menu>\n          {tabPanel}\n        </Sidebar.Pusher>\n      </Sidebar.Pushable>\n    </Grid.Row>\n    <Grid.Row columns={1} only='computer'>\n      <Sidebar.Pushable as={Grid.Column} className='computer-sidebar-container'>\n        <Menu vertical fixed='left' pointing secondary color='blue'\n        >{menuItems}\n        </Menu>\n        <Sidebar.Pusher>\n          {tabPanel}\n        </Sidebar.Pusher>\n      </Sidebar.Pushable>\n    </Grid.Row>\n  </Grid>);\n}\n\nexport default TabSidebar;\n","import React from 'react';\n\nimport './Loading.scss';\n\nimport { Header } from 'semantic-ui-react';\nimport { ClipLoader } from 'react-spinners';\n\ninterface LoadingProps {\n  isLoading: boolean\n};\n\nconst Loading: React.FunctionComponent<LoadingProps> = (props) => {\n  const { isLoading, children } = props;\n  const color = '#4A90E2';\n\n  return <React.Fragment>\n    {isLoading ? (\n      <div className='loading-container'>\n        <ClipLoader\n          loading={isLoading} color={color}\n          sizeUnit={'px'} size={100}\n        />\n        <Header className='loading-text' textAlign='center'>Loading Data...</Header>\n      </div>\n    ) : children}\n  </React.Fragment>;\n}\n\nLoading.defaultProps = {\n  isLoading: true\n}\n\nexport default Loading;\n","import React from 'react';\n\nimport './static/semantic/semantic.min.css';\nimport './GSXToWebApp.scss';\n\nimport DataViewTab from './DataViewTab';\nimport TabSidebar from './components/TabSidebar';\nimport Loading from './components/Loading';\n\nimport { getStringFromRawObject, getRowDataFromWorksheetEntries } from './utilities/gsx';\n\nimport { WorksheetLink, WorksheetEntry } from './interface/gsx';\nimport { RowData, WorksheetData, Settings } from './interface/app';\n\nconst defaultSettings: Settings = { title: '', links: [] };\nconst defaultSettingData: RowData = { attribute: '', content: '' };\nconst linkRegexp = new RegExp(/^\\[(.+)\\]\\((.+)\\)$/);\n\nconst GSXToWebApp: React.FunctionComponent<{}> = () => {\n  const [isLoading, setIsLoading] = React.useState<boolean>(true);\n  const [title, setTitle] = React.useState<string>('');\n  const [settings, setSettings] = React.useState<Settings>(defaultSettings);\n  const [worksheets, setWorksheets] = React.useState<WorksheetData[]>([]);\n\n  React.useEffect(() => {\n    const getSettingsFromWorksheet = (WorksheetUrl: string) => {\n      fetch(WorksheetUrl)\n        .then(response => response.json())\n        .then((result) => {\n          if (result && result.feed && result.feed.title && result.feed.entry) {\n            let rawSettings: Settings = defaultSettings;\n            getRowDataFromWorksheetEntries(result.feed.entry).forEach(\n              (rowData: RowData) => {\n                const rawSetting = Object.assign(defaultSettingData, rowData);\n\n                if (rawSetting.attribute === 'title') {\n                  rawSettings.title = rawSetting.content;\n                }\n\n                if (rawSetting.attribute === 'links') {\n                  const matches: string[] = rawSetting.content.match(linkRegexp) || [];\n                  rawSettings.links.push({ name: matches[1], href: matches[2] });\n                }\n              }\n            );\n            setSettings({...rawSettings});\n          }\n        }, (error) => {\n          // setIsError(true);\n        });\n    }\n\n    const getWorksheetLink = (links: WorksheetLink[], target: RegExp): string => {\n      const link: WorksheetLink | undefined = links.find(link => target.test(link.rel));\n      return link ? `${link.href}?alt=json` : '';\n    }\n\n    const getWorksheetDataFromEntries = (entries: WorksheetEntry[]): WorksheetData[] => {\n      let worksheets: WorksheetData[] = [];\n      entries.forEach((entry: WorksheetEntry) => {\n        const sheetTitle = getStringFromRawObject(entry.title);\n        const sheetLink = getWorksheetLink(entry.link, /#listfeed/);\n\n        if (sheetTitle === '' || sheetLink === '') { return; }\n        if (sheetTitle === 'Settings') { getSettingsFromWorksheet(sheetLink); return; }\n\n        worksheets.push({ title: sheetTitle, link: sheetLink });\n      });\n      return worksheets;\n    }\n\n    const urlParams: URLSearchParams = new URLSearchParams(window.location.search);\n    let sheetID: string = urlParams.get('sheetid') || '';\n\n    if (sheetID === '') {\n      sheetID = '1WWh4gfO9Iak3XzPZb0CYN4_N-g5bALiDZsnN97qn0nk';\n      // setIsError(true);\n      // return\n    }\n\n    const apidomain: string = 'https://spreadsheets.google.com';\n    const apiQuery: string = `feeds/worksheets/${sheetID}/public/values?alt=json`;\n    const apiUrl: string = `${apidomain}/${apiQuery}`;\n\n    fetch(apiUrl)\n      .then(response => response.json())\n      .then((result) => {\n        if (result && result.feed && result.feed.title && result.feed.entry) {\n          setTitle(getStringFromRawObject(result.feed.title));\n          setWorksheets(getWorksheetDataFromEntries(result.feed.entry));\n          setIsLoading(false);\n        }\n      }, (error) => {\n        // setIsError(true);\n      });\n  }, []);\n\n  return (\n    <Loading isLoading={isLoading} >\n      <TabSidebar\n        title={settings.title || title}\n        tabMenuItems={worksheets.map((worksheet) => ({\n          name: worksheet.title,\n          panel: (<DataViewTab worksheet={worksheet} />)\n        }))}\n        linkMenuItems={settings.links} />\n    </Loading>\n  );\n}\n\nexport default GSXToWebApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // 'Content is cached for offline use.' message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-app-polyfill/ie11'\nimport 'react-app-polyfill/stable'\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'normalize.css';\nimport './index.scss';\n\nimport GSXToWebApp from './GSXToWebApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<GSXToWebApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}